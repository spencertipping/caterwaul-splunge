caterwaul.module( 'splunge' , (function(e1) {var result= (function($) { (function() {var v2plus=e1.v2plus,v2times=e1.v2times,v2minus=e1.v2minus,v2scale=e1.v2scale,v2dot=e1.v2dot,v2norm=e1.v2norm,v2macv=e1.v2macv,v2macs=e1.v2macs,v2unit=e1.v2unit,v2proj=e1.v2proj,v2orth=e1.v2orth;
return $.splunge= (function() {var interpolate=function(t1,t2,x) {;
return plus(scale(t1,1.0-x) ,scale(t2,x) ) } ,plus=function(t1,t2) {;
return{x0:t1.x0+t2.x0,dx:t1.dx+t2.dx,y0:t1.y0+t2.y0,dy:t1.dy+t2.dy} } ,scale=function(t,x) {;
return{x0:t.x0*x,dx:t.dx*x,y0:t.y0*x,dy:t.dy*x} } ,union=function(t1,t2) {;
return(function() {var p1=base(t1) ,p2=project(t1,1) ,p3=base(t2) ,p4=project(t2,1) ,min= (function(xs) {var x,x0,xi,xl,xr;
for(var x0=xs[0] ,xi=1,xl=xs.length;
xi<xl;
 ++xi)x=xs[xi] ,x0= ( (function(o) {for(var r= {} ,i=0,l=o.length,x;
i<l;
 ++i)x=o[i] ,r[x[0] ] =x[1] ;
return r} ) .call(this, ( (function(ks) {var k,k0,ki,kl,kr;
for(var kr=new ks.constructor() ,ki=0,kl=ks.length;
ki<kl;
 ++ki)k=ks[ki] ,kr.push( ( [k,Math.min(x[k] ,x0[k] ) ] ) ) ;
return kr} ) .call(this, [ 'x0' , 'dx' , 'y0' , 'dy' ] ) ) ) ) ;
return x0} ) .call(this, [p1,p2,p3,p4] ) ,max= (function(xs) {var x,x0,xi,xl,xr;
for(var x0=xs[0] ,xi=1,xl=xs.length;
xi<xl;
 ++xi)x=xs[xi] ,x0= ( (function(o) {for(var r= {} ,i=0,l=o.length,x;
i<l;
 ++i)x=o[i] ,r[x[0] ] =x[1] ;
return r} ) .call(this, ( (function(ks) {var k,k0,ki,kl,kr;
for(var kr=new ks.constructor() ,ki=0,kl=ks.length;
ki<kl;
 ++ki)k=ks[ki] ,kr.push( ( [k,Math.max(x[k] ,x0[k] ) ] ) ) ;
return kr} ) .call(this, [ 'x0' , 'dx' , 'y0' , 'dy' ] ) ) ) ) ;
return x0} ) .call(this, [p1,p2,p3,p4] ) ;
return bound(min,max) } ) .call(this) } ,tau=2*Math.PI,inverse=function(t,p) {;
return{x:Math.tan( (Math.min(Math.sqrt(p.x*p.x+p.y*p.y) ,1.0) -0.5) *Math.PI) *t.dx+t.x0,y: (Math.atan2(p.y,p.x) /tau+1) %1*t.dy+t.y0} } ,transform=function(t,p) {;
return(function() {var d=Math.atan( (p.x-t.x0) /t.dx) /Math.PI+0.5,angle=Math.min(Math.max( (p.y-t.y0) /t.dy*tau,0) ,tau) ;
return{x:d*Math.cos(angle) ,y:d*Math.sin(angle) ,d:d,angle:angle} } ) .call(this) } ,cosine=function(x) {;
return Math.cos(x*Math.PI) * -0.5+0.5} ,viewport=function(initial,f) {;
return(function() {var _transform=initial,stop=function() {;
return _interval&& (clearInterval(_interval) ,_interval=null) } ,_interval=null,animate=function(t,duration,tween) {;
return(stop() ,_interval=setInterval(interpolator(_transform,t, +new Date,duration||400,tween||cosine) ,40) ) } ,transform=function(t) {;
return t?f(_transform=t) 
:_transform} ,interpolator=function(s,t,c,d,i) {;
return function() {var now= +new Date;
return(now>c+d&& (stop() ,now=c+d) ,transform(interpolate(s,t,i( (now-c) /d) ) ) ) } } ;
return{_transform:_transform,stop:stop,_interval:_interval,animate:animate,transform:transform,interpolator:interpolator} } ) .call(this) } ,default_viewport=function(canvas,t) {;
return viewport(t|| {x0:0,dx:1,y0:0,dy:1} ,default_renderer(canvas) ) } ,drag_events=function(canvas) {;
return(function() {var last_x=0,last_y=0,dragging=false,last_selected=null,$doc=jQuery(document) ,self=jQuery(canvas) ,record=function(x,y) {;
return(last_x=x,last_y=y) } ,start_dragging=function(e) {;
return(record(e.pageX,e.pageY) , ( ($doc) .mousemove(drag) ) .mouseup(stop_dragging) ) } ,stop_dragging=function(e) {;
return $doc.unbind( 'mousemove' ,drag) .unbind( 'mouseup' ,stop_dragging) } ,drag=function(e) {;
return(self.trigger( 'drag_delta' ,$.merge( {} ,e, {dx:e.pageX-last_x,dy:e.pageY-last_y} ) ) ,record(e.pageX,e.pageY) ) } ;
return( !self.data( 'splunge_drag_delta_installed' ) &&self.mousedown(start_dragging) .data( 'splunge_drag_delta_installed' ,true) ,self) } ) .call(this) } ,default_interaction=function(canvas,v) {;
return(function() {var x_scale=function(v) {;
return v.transform() .dx} ,pan_or_scale=function(e) {;
return e.shiftKey?scale(e) 
:pan(e) } ,y_scale=function(v) {;
return v.transform() .dy} ,scale=function(e) {;
return v.transform(plus(base(v.transform() ) ,times(d(v.transform() ) , {x:e.dx,y:e.dy} ) ) ) } ;
return drag_events(canvas) .on( 'drag_delta' ,pan_or_scale) } ) .call(this) } ,point_hits=function(p,h) {;
return(function(it) {return p.x>=it.x0&&p.y>=it.y0&&p.y<=it.y0+it.dy&&it} ) .call(this, (bbox(h) ) ) } ,point_hits_self=function(p,h) {;
return(function(it) {return it&&p.x<=it.x0+it.dx} ) .call(this, (point_hits(p,h) ) ) } ,find_by_transformed=function(h,t,p) {;
return find_by_point(h,inverse(t,p) ) } ,find_by_point=function(h,p) {;
return point_hits(p,h) && (point_hits_self(p,h) ?h
:h.xs&& (function(xs) {var x,x0,xi,xl,xr;
for(var x=xs[0] ,xi=0,xl=xs.length,x1;
xi<xl;
 ++xi) {x=xs[xi] ;
if(x1= (find_by_point(x,p) ) )return x1}return false} ) .call(this,h.xs) ) } ,single_path=function(h,t) {;
return function(c) {;
return(function() {var p1=base(bbox(h) ) ,p2=project(bbox(h) ,1) ,c1=transform(t,p1) ,c3=transform(t,p2) ,c2=transform(t,mix(p2,p1) ) ,c4=transform(t,mix(p1,p2) ) ;
return( ( ( (c.moveTo(c1.x,c1.y) ,c.lineTo(c2.x,c2.y) ) ,c.arc(0,0,c2.d,c2.angle,c3.angle) ) ,c.lineTo(c4.x,c4.y) ) ,c.arc(0,0,c4.d,c4.angle,c1.angle,true) ) } ) .call(this) } } ,dt=function(t,p1,p2) {;
return(function() {var tp1=transform(t,p1) ,tp2=transform(t,p2) ;
return(function(o) {for(var r= {} ,i=0,l=o.length,x;
i<l;
 ++i)x=o[i] ,r[x[0] ] =x[1] ;
return r} ) .call(this, ( (function(xs) {var x,x0,xi,xl,xr;
for(var xr=new xs.constructor() ,xi=0,xl=xs.length;
xi<xl;
 ++xi)x=xs[xi] ,xr.push( ( [x[0] ,tp2[x[0] ] -x[1] ] ) ) ;
return xr} ) .call(this, (function(o) {var ps= [] ;
for(var k in o)Object.prototype.hasOwnProperty.call(o,k) &&ps.push( [k,o[k] ] ) ;
return ps} ) .call(this, (tp1) ) ) ) ) } ) .call(this) } ,is_visible=function(h,t) {;
return bbox(h) .y0+h.bbox.dy>t.y0&&h.bbox.y0<t.y0+t.dy} ,paths=function(h,t) {;
return function(f) {;
return f(single_path(h,t) ,h,t) && (h.xs&& (function(xs) {var x,x0,xi,xl,xr;
for(var xi=0,xl=xs.length;
xi<xl;
 ++xi)x=xs[xi] , (is_visible(x,t) &&paths(x,t) (f) ) ;
return xs} ) .call(this,h.xs) ) } } ;
return{interpolate:interpolate,plus:plus,scale:scale,union:union,tau:tau,inverse:inverse,transform:transform,cosine:cosine,viewport:viewport,default_viewport:default_viewport,drag_events:drag_events,default_interaction:default_interaction,point_hits:point_hits,point_hits_self:point_hits_self,find_by_transformed:find_by_transformed,find_by_point:find_by_point,single_path:single_path,dt:dt,is_visible:is_visible,paths:paths} } ) .call(this) } ) .call(this) } ) ;
result.caterwaul_expression_ref_table= {e1: ( "caterwaul.vector(2, 'v2' )" ) } ;
return(result) } ) .call(this,caterwaul.vector(2, 'v2' ) ) ) ;
