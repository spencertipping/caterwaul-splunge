<!doctype html>
<html>
<head>
  <script src='jquery.min.js'></script>
  <script src='../splunge.all.js'></script>
  <script src='caterwaul.ui.min.js'></script>
  <script>
    $(caterwaul(':all')(function () {
      s.default_interaction($('#splunge-test'), s.viewport(data, s.default_zoom_transform, s.default_ring_view_transform([0, 0] /-s.box/ [400, 290]))).on('splunge_render', redraw),

      where [s              = caterwaul.splunge,
             context        = $('#splunge-test')[0].getContext('2d') -se [it.fillStyle = 'green'],
             redraw()       = context.clearRect(0, 0, $(this).width(), $(this).height()) -then- s.each(draw_arc, s.descend_while("_.bound().area() > 0.01".qf, $(this).val().data())),
             draw_arc(data) = console.log(data) -then- context.beginPath() -then- s.arc_path(data, context) -then- context.fill(),
             data           = s.list(s.rectangle('foo', [0, 0], [1, 2]), s.rectangle('bar', [0, 2], [1, 1]))]}))
  </script>
</head>
<body style='margin:0'>
  <canvas id='splunge-test' width='800' height='580'></canvas>
</body>
</html>
